{% extends "bases/unicms_unical.html" %}

{% load i18n %}
{% load static %}
{% load unicms_templates %}


{% block header_center_logo %}

{% get_current_language as LANGUAGE_CODE %}
{% settings_value "CMS_WEBPATH_CDS" as cms_webpath_cds %}
{% if cms_webpath_cds %}
    {% with cms_webpath_cds|get_value:webpath.pk as cds_identifier %}
    {% if cds_identifier %}
    <div id="_{{ cds_cod }}_logo">
        <p class="h5 text-white">
            [[ item.CDSCourseClassName ]]
        </p>
        <p class="h2 text-white">
            [[ item.CDSName ]]
        </p>
    </div>
    <script>
        var _{{ cds_cod }}_logo = new Vue({
            el: '[id="_{{ cds_cod }}_logo"]',
            data() {
                return {
                    item: {},
                }
            },
            mounted() {
                this.CallURL();
            },
            methods: {
                CallURL() {
                    let url = 'https://pp.storage.unical.it/api/ricerca/cds-websites/{{ cds_identifier }}/?lang={{ LANGUAGE_CODE }}';
                    axios
                        .get(url)
                        .then(response => {
                            this.item = response.data.results;
                        })
                }
            }
        });
    </script>
    {% else %}
        {{ block.super }}
    {% endif %}

    {% endwith %}
{% else %}
    {{ block.super }}
{% endif %}
{% endblock header_center_logo %}
