{% extends "pages/unical_cds_website.html" %}

{% load static %}
{% load i18n %}

{% load unicms_contexts %}
{% load unicms_storage_handler %}
{% load unicms_templates %}

{% include "includes/unical_storage_loading.html" %}


<!-- SEO  -->
{% block page_title %}
{% storage_settings_value "CMS_STORAGE_CDS_WEBSITES_CORSO_LABEL" as page_title %}
{{ page_title }} - {{ block.super }}
{% endblock page_title %}

{% block website_page_year %}
{% storage_settings_value "CDS_WEBSITE_CURRENT_YEAR" as cds_website_current_year %}
if(!year)year = "{{ cds_website_current_year }}"
{% endblock website_page_year %}

{% block container %}

{% get_cds_website_cds_cod webpath.pk cds_cod as cds_identifier %}
{% get_current_language as LANGUAGE_CODE %}
{% breadcrumbs webpath=webpath leaf=handler %}

{% get_allowed_website request.get_host as host %}
{% settings_value "CMS_PATH_PREFIX" as cms_path_prefix %}
{% storage_settings_value "CMS_STORAGE_BASE_PATH" as base_prefix %}
{% storage_settings_value "CMS_STORAGE_CDS_VIEW_PREFIX_PATH" as cds_prefix %}
{% storage_settings_value "CMS_STORAGE_ACTIVITY_VIEW_PREFIX_PATH" as activity_prefix %}
{% storage_settings_value "CMS_STORAGE_BASE_API" as base_api %}
{% storage_settings_value "CMS_STORAGE_CDS_API" as cds_api %}
{% storage_settings_value "CDS_WEBSITE_COURSE_INFO_FIELDS" as fields_to_show %}
{% storage_settings_value "CMS_STORAGE_CDS_WEBSITES_TOPICS_API" as topics_api %}
{% storage_settings_value "CMS_STORAGE_CDS_WEBSITES_PAGE_TOPICS" as page_topics %}
{% storage_settings_value "CMS_STORAGE_CDS_WEBSITES_TOPIC_ARTICLES_API" as page_topic_articles %}
{% storage_api_root "CMS_STORAGE_ACADEMICYEARS_API" as academicyears_api %}
{% storage_settings_value "CMS_STORAGE_CDS_WEBSITES_CORSO_LABEL" as page_title %}
{% storage_settings_value "MAIN_DOMAIN" as unicms_root_url %}
{% storage_settings_value "CMS_STORAGE_CDS_WEBSITES_API" as cds_websites_api %}
{% storage_settings_value "CMS_STORAGE_CDS_WEBSITES_STUDYPLANS_API" as cds_websites_studyplans_api %}
{% storage_settings_value "EXCLUDE_STUDY_ACTIVITIES_CODES" as exclude_studyactivity_codes %}
{% storage_settings_value "CDS_EXCLUDE_YEAR" as cds_exclude_year %}
{% storage_settings_value "CURRENT_YEAR" as current_year %}
{% storage_settings_value "CDS_WEBSITE_CURRENT_YEAR" as cds_website_current_year %}
{% storage_settings_value "CMS_STORAGE_CDS_WEBSITES_BASE_PATH" as cds_base_path %}
{% storage_settings_value "CMS_STORAGE_CDS_WEBSITES_STUDIARE_VIEW_PREFIX_PATH" as cds_studiare_path %}

{% include "includes/unical_storage_loading.html" %}



<div class="col-12 py-5 bd-content">
    <div>
        {% block centered_container %}
        <div class="container">
            <div class="row">
                <div class="col-12 col-lg-8">
                    <p class="h1 lighter">{{ page_title }}</p>
                    <div class="mt-5" id="_{{ cds_cod }}_1">
                        <p v-html="item.CDSIntro"></p>
                        <div id="accordionDiv1-lft" class="accordion accordion-left-icon">
                            <div v-for="name in fields_to_show" v-if="_cds_data.fixed_cds[name] && (_cds_data.fixed_cds[name].length > 0 || Object.keys(_cds_data.fixed_cds[name]).length > 0) && name != 'CdSSatisfactionSurvey'">
                                <div class="accordion-item">
                                    <div class="accordion-header" :id="'heading-' + name +'-lft'">
                                        <button class="accordion-button"
                                                type="button"
                                                data-bs-toggle="collapse"
                                                :data-bs-target="'#collapse-' + name +'-lft'"
                                                aria-expanded="false"
                                                :aria-controls="'collapse-' + name +'-lft'">
                                            [[ _cds_data.fixed_cds_labels[name] ]]
                                        </button>
                                    </div>
                                    <div :id="'collapse-' + name +'-lft'"
                                         class="accordion-collapse collapse"
                                         data-bs-parent="#accordionDiv1-lft"
                                         role="region"
                                         :aria-labelledby="'heading-' + name +'-lft'">
                                        <div class="accordion-body">
                                            <span v-if="Array.isArray(_cds_data.fixed_cds[name])">
                                                <ul>
                                                    <li v-for="subvalue in _cds_data.fixed_cds[name]">
                                                        <span v-if="_cds_data.containsHTML(subvalue)" v-html="subvalue"></span>
                                                        <span v-else>[[ subvalue ]]</span>
                                                    </li>
                                                </ul>
                                            </span>
                                            <span v-else-if="typeof _cds_data.fixed_cds[name] === 'object'">
                                                <ul v-for="(valueProfile, nameProfile) in _cds_data.fixed_cds[name]">
                                                    <li>
                                                        [[ nameProfile ]]
                                                        <ul v-for="(valueProfileInstance, nameProfileInstance) in valueProfile">
                                                            <li>
                                                                <span v-if="nameProfileInstance in _cds_data.fixed_cds_labels"
                                                                      style="white-space: pre-line;">
                                                                    [[ _cds_data.fixed_cds_labels[nameProfileInstance] ]]
                                                                </span>
                                                                <span v-else>
                                                                    [[ nameProfileInstance ]]
                                                                </span> :
                                                                <br>
                                                                <span v-if="_cds_data.containsHTML(valueProfileInstance)" v-html="valueProfileInstance"></span>
                                                                <span v-else style="white-space: pre-line;">[[ valueProfileInstance ]]</span>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </span>
                                            <span v-else>
                                                <span style="white-space: pre-line;">
                                                    {% if full_page %}
                                                    <a v-if="name != 'CdSSatisfactionSurvey' && name == 'CdSDoc'" v-bind:href="_cds_data.fixed_cds[name]">
                                                        [[ _cds_data.fixed_cds[name] ]]
                                                    </a>
                                                    <span v-else-if="name != 'CdSSatisfactionSurvey'">
                                                        <span v-if="_cds_data.containsHTML(_cds_data.fixed_cds[name])" v-html="_cds_data.fixed_cds[name]"></span>
                                                        <span v-else>[[ _cds_data.fixed_cds[name] ]]</span>
                                                    </span>
                                                    {% else %}
                                                    <a v-if="name == 'CdSSatisfactionSurvey'" v-bind:href="'{{ almalaurea_link }}' + _cds_data.fixed_cds[name]">
                                                        {{ almalaurea_link }}[[ _cds_data.cds[name] ]]
                                                    </a>
                                                    <a v-else-if="name == 'CdSDoc'" v-bind:href="_cds_data.fixed_cds[name]">
                                                        [[ _cds_data.cds[name] ]]
                                                    </a>
                                                    <span v-else>
                                                        <span v-if="_cds_data.containsHTML(_cds_data.fixed_cds[name])" v-html="_cds_data.fixed_cds[name]"></span>
                                                        <span v-else>[[ _cds_data.cds[name] ]]</span>
                                                    </span>
                                                    {% endif %}
                                                </span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <ul class="nav nav-tabs mt-5" id="myTab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="tab1-tab" data-bs-toggle="tab" href="#tab1" role="tab" aria-controls="tab1" aria-selected="true">
                                {% trans "Academic Year" %} {{ cds_website_current_year }}/{{ cds_website_current_year|add:"1" }}
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="tab2-tab" data-bs-toggle="tab" href="#tab2" role="tab" aria-controls="tab2" aria-selected="false">
                                {% if current_year == cds_website_current_year %}
                                {% trans "Previous academic years" %}
                                {% else %}
                                {% trans "Current academic year and previous" %}
                                {% endif %}
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane p-4 fade show active" id="tab1" role="tabpanel" aria-labelledby="tab1-tab">
                            <div id="course_studyplans">
                                <!-- study plans new -->
                                <p class="h4 mb-3">{% trans "Study plan" %}</p>
                                <loading-icon
                                    v-if="is_loading"
                                    :loader_source="loader_source">
                                </loading-icon>
                                <div v-else-if="items && 'PlanTabs' in items">
                                    <div v-if="curricula.length == 1">
                                        <div id="accordionDiv00-lft" class="accordion accordion-left-icon">
                                            <div class="accordion-item" v-for="tab in items.PlanTabs">
                                                {% include "includes/unical_storage_cds_website_studyplan_accordion.html" %}
                                            </div>
                                        </div>
                                    </div>
                                    <div v-else>
                                        <div id="accordionDiv000-lft" class="accordion accordion-left-icon">
                                            <div class="accordion-item" v-for="(curriculum, index1) in curricula">
                                                <div class="accordion-header" :id="'heading-cdswebsitestudyplan-' + index1 + '-lft'">
                                                    <button class="accordion-button"
                                                            type="button"
                                                            data-bs-toggle="collapse"
                                                            :data-bs-target="'#collapse-cdswebsitestudyplan-' + index1 + '-lft'"
                                                            aria-expanded="false"
                                                            :aria-controls="'collapse-cdswebsitestudyplan-' + index1 + '-lft'">
                                                        [[ curriculum ]]
                                                    </button>
                                                </div>
                                                <div :id="'collapse-cdswebsitestudyplan-' + index1 + '-lft'"
                                                     class="accordion-collapse collapse"
                                                     data-bs-parent="#accordionDiv000-lft"
                                                     role="region"
                                                     :aria-labelledby="'heading-cdswebsitestudyplan-' + index1 + '-lft'">
                                                    <div class="accordion-body mt-3">
                                                        <div id="accordionDiv00-lft" class="accordion accordion-left-icon">
                                                            <div class="accordion-item" v-for="tab in items.PlanTabs" v-if="tab.PdsDes == curriculum">
                                                                {% include "includes/unical_storage_cds_website_studyplan_accordion.html" %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="alert alert-info mt-4" role="alert">
                                        <p class="h6"><b>{% trans "What does it mean?" %}</b></p>
                                        <hr>
                                        <ul>
                                            <li>
                                                <b>{% trans "Statutory study plan" %}:</b>
                                                {% trans "it is the official plan that the course of study attributes automatically to all enrolled students. In the first modification of the study plan the student may change activities within any groups of optional subjects and indicate free choices" %}
                                            </li>
                                            <li>
                                                <b>{% trans "Alternative study plan" %}:</b>
                                                {% trans "it is the plan that the student presents by choosing the activities training within options and free choices, prepared by the course of study, in compliance with some constraints" %}
                                            </li>
                                            <li>
                                                <b>{% trans "Part-time study plan" %}:</b>
                                                {% trans "is the path of the student who has opted for the part-time regime, typically with half the number of training credits per year compared to full-time" %}
                                            </li>
                                            <li>
                                                <b>{% trans "Activities of your choice" %}:</b>
                                                {% trans "the student will be able to choose from activities offered by the university's study courses" %}
                                                ({% trans "choice" %} <i>"libera da OF"</i>)
                                                {% trans "or within lists predefined by the course of study, according to the rules indicated in the plan modification web platform." %}
                                            </li>
                                            <li>
                                                <b>{% trans "Constraints" %}:</b>
                                                {% trans "express the minimum/maximum number of training credits to choose within a group of courses and/or type of study courses." %}
                                            </li>
                                            <li>
                                                <b>{% trans "Modification of the study plan" %}:</b>
                                                {% trans "the student can change the study plan before the start of each semester, in the relevant time window established by the Department." %}
                                                {% trans "Follow the directions on the page" %}
                                                "<a href="{{ webpath.fullpath }}{{ cds_base_path }}/{{ cds_studiare_path }}/">{% trans "Study" %}</a>" {% trans "of the site" %}.
                                                {% trans "For more details, please see" %}
                                                <a :href="_cds_data.fixed_cds.DidacticRegulation" target="_blank">{% trans "Didactic regulation" %}</a>
                                                {% trans "of the course and the" %}
                                                <a :href="_cds_data.fixed_cds.StudyManifesto" target="_blank">{% trans "Study manifesto" %}</a>.
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div v-else>
                                    {% trans "No items here" %}
                                </div>

                                <hr class="my-5">

                                <p class="h4">{% trans "Documents" %}</p>
                                <div v-if="_cds_data.fixed_cds.StudyManifesto || _cds_data.fixed_cds.DidacticRegulation || _cds_data.fixed_cds.TeachingSystem">
                                    <ul class="mb-0">
                                        <li v-if="_cds_data.fixed_cds.StudyManifesto">
                                            <a target="_blank" :href="_cds_data.fixed_cds.StudyManifesto">
                                                [[ _cds_data.fixed_cds_labels['StudyManifesto'] ]]
                                            </a>
                                        </li>
                                        <li v-if="_cds_data.fixed_cds.DidacticRegulation">
                                            <a target="_blank" :href="_cds_data.fixed_cds.DidacticRegulation">
                                               [[ _cds_data.fixed_cds_labels['DidacticRegulation'] ]]
                                            </a>
                                        </li>
                                        <li v-if="_cds_data.fixed_cds.TeachingSystem">
                                            <a target="_blank" :href="_cds_data.fixed_cds.TeachingSystem">
                                                [[ _cds_data.fixed_cds_labels['TeachingSystem'] ]]
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                <div v-else>
                                    {% trans "No items here" %}
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane p-4 fade show" id="tab2" role="tabpanel" aria-labelledby="tab2-tab">
                            <!-- study plans new -->
                            <div id="course_studyplans_others">

                                <div class="row">
                                    <div class="col-sm form-group mb-0">
                                        <div class="w-30">
                                            <select id="academic_year_input"
                                                    title="{% trans 'Choose an option' %}"
                                                    name="academic_year_input"
                                                    class="form-control"
                                                     @change="changeYear($event.target.value)">
                                              <option value="">- {% trans "Choose an academic year" %} -</option>
                                              <option v-for="item in academic_years_filter"
                                                      :value="item.AcademicYear"
                                                      v-if="item.AcademicYear != '{{ cds_exclude_year }}'">
                                                  [[ item.AcademicYear ]]/[[ item.AcademicYear + 1 ]]
                                              </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div v-if="selected_year" class="mt-4">

                                    <p class="h4 mb-3">{% trans "Study plan" %}</p>
                                    <loading-icon
                                        v-if="is_loading"
                                        :loader_source="loader_source">
                                    </loading-icon>
                                    <div v-else-if="items && 'PlanTabs' in items">

                                        <div v-if="curricula.length == 1">

                                            <div id="accordionDiv00-lft" class="accordion accordion-left-icon">
                                                <div class="accordion-item" v-for="tab in items.PlanTabs">
                                                    {% include "includes/unical_storage_cds_website_studyplan_accordion.html" %}
                                                </div>
                                            </div>
                                        </div>
                                        <div v-else>
                                            <div id="accordionDiv000-lft" class="accordion accordion-left-icon">
                                                <div class="accordion-item" v-for="(curriculum, index1) in curricula">
                                                    <div class="accordion-header" :id="'heading-cdswebsitestudyplan-' + index1 + '-lft'">
                                                        <button class="accordion-button"
                                                                type="button"
                                                                data-bs-toggle="collapse"
                                                                :data-bs-target="'#collapse-cdswebsitestudyplan-' + index1 + '-lft'"
                                                                aria-expanded="false"
                                                                :aria-controls="'collapse-cdswebsitestudyplan-' + index1 + '-lft'">
                                                            [[ curriculum ]]
                                                        </button>
                                                    </div>
                                                    <div :id="'collapse-cdswebsitestudyplan-' + index1 + '-lft'"
                                                         class="accordion-collapse collapse"
                                                         data-bs-parent="#accordionDiv000-lft"
                                                         role="region"
                                                         :aria-labelledby="'heading-cdswebsitestudyplan-' + index1 + '-lft'">
                                                        <div class="accordion-body mt-3">
                                                            <div id="accordionDiv00-lft" class="accordion accordion-left-icon">
                                                                <div class="accordion-item" v-for="tab in items.PlanTabs" v-if="tab.PdsDes == curriculum">
                                                                    {% include "includes/unical_storage_cds_website_studyplan_accordion.html" %}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="alert alert-info mt-4" role="alert">
                                            <p class="h6"><b>{% trans "What does it mean?" %}</b></p>
                                            <hr>
                                            <ul>
                                                <li>
                                                    <b>{% trans "Statutory study plan" %}:</b>
                                                    {% trans "it is the official plan that the course of study attributes automatically to all enrolled students. In the first modification of the study plan the student may change activities within any groups of optional subjects and indicate free choices" %}
                                                </li>
                                                <li>
                                                    <b>{% trans "Alternative study plan" %}:</b>
                                                    {% trans "it is the plan that the student presents by choosing the activities training within options and free choices, prepared by the course of study, in compliance with some constraints" %}
                                                </li>
                                                <li>
                                                    <b>{% trans "Part-time study plan" %}:</b>
                                                    {% trans "is the path of the student who has opted for the part-time regime, typically with half the number of training credits per year compared to full-time" %}
                                                </li>
                                                <li>
                                                    <b>{% trans "Activities of your choice" %}:</b>
                                                    {% trans "the student will be able to choose from activities offered by the university's study courses" %}
                                                    ({% trans "choice" %} <i>"libera da OF"</i>)
                                                    {% trans "or within lists predefined by the course of study, according to the rules indicated in the plan modification web platform." %}
                                                </li>
                                                <li>
                                                    <b>{% trans "Constraints" %}:</b>
                                                    {% trans "express the minimum/maximum number of training credits to choose within a group of courses and/or type of study courses." %}
                                                </li>
                                                <li>
                                                    <b>{% trans "Modification of the study plan" %}:</b>
                                                    {% trans "the student can change the study plan before the start of each semester, in the relevant time window established by the Department." %}
                                                    {% trans "Follow the directions on the page" %}
                                                    "<a href="{{ webpath.fullpath }}{{ cds_base_path }}/{{ cds_studiare_path }}/">{% trans "Study" %}</a>" {% trans "of the site" %}.
                                                    {% trans "For more details, please see" %}
                                                    <a :href="_cds_data.fixed_cds.DidacticRegulation" target="_blank">{% trans "Didactic regulation" %}</a>
                                                    {% trans "of the course and the" %}
                                                    <a :href="_cds_data.fixed_cds.StudyManifesto" target="_blank">{% trans "Study manifesto" %}</a>.
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div v-else>
                                        {% trans "No items here" %}
                                    </div>

                                    <hr class="my-5">

                                    <p class="h4">{% trans "Documents" %}</p>
                                    <div v-if="_cds_data.cds.StudyManifesto || _cds_data.cds.DidacticRegulation || _cds_data.cds.TeachingSystem">
                                        <ul class="mb-0">
                                            <li v-if="_cds_data.cds.StudyManifesto">
                                                <a target="_blank" :href="_cds_data.cds.StudyManifesto">
                                                    [[ _cds_data.cds_labels['StudyManifesto'] ]]
                                                </a>
                                            </li>
                                            <li v-if="_cds_data.cds.DidacticRegulation">
                                                <a target="_blank" :href="_cds_data.cds.DidacticRegulation">
                                                   [[ _cds_data.cds_labels['DidacticRegulation'] ]]
                                                </a>
                                            </li>
                                            <li v-if="_cds_data.cds.TeachingSystem">
                                                <a target="_blank" :href="_cds_data.cds.TeachingSystem">
                                                    [[ _cds_data.cds_labels['TeachingSystem'] ]]
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div v-else>
                                        {% trans "No items here" %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-3 offset-lg-1 mt-4 mt-lg-0">
                    {% include "includes/unical_storage_cds_website_right_static.html" %}
                    <hr style="color: transparent" class="my-3" />
                    {% include "includes/unical_storage_cds_website_right_contacts.html" %}
                    <hr style="color: transparent" class="my-3" />
                    {% include "includes/unical_storage_cds_website_right_links.html" with hide_ordinamento=1 %}
                </div>
            </div>
        </div>
        {% endblock %}
    </div>
</div>

<script>
var _cds_website_text = new Vue({
    el: '#_{{ cds_cod }}_1',
    data() {
        return {
            item: {},
            fields_to_show: {{ fields_to_show|safe }},
        }
    },
    mounted() {
        this.callWebsite()
    },
    methods: {
        callWebsite() {
            let url = '{{ base_api }}{{ cds_websites_api }}{{ cds_cod }}/?lang={{ LANGUAGE_CODE }}'
            axios
                .get(url)
                .then(response => {
                    this.item = response.data.results
                }
            )
        },
    }
});

var _{{ cds_cod }}_studyplans = new Vue({
    el: '#course_studyplans',
    data() {
        return {
            cds: {},
            url: '',
            is_loading: true,
            loader_source: '',
            item: {},
            items: {},
            curricula: []
        }
    },
    mounted() {
        this.callStudyPlans()
    },
    methods: {
        {% include "includes/unical_storage_cds_website_scroll.html" %}
        callStudyPlans(year={{ cds_website_current_year }}) {
            this.is_loading = true
            axios
                .get('{{ base_api }}{{ cds_websites_studyplans_api }}?lang={{ LANGUAGE_CODE }}&cds_cod={{ cds_cod }}&year=' + year)
                .then(response => {
                    let curricula = []
                    if(response.data.results.length > 0) {
                        response.data.results[0].PlanTabs.forEach(
                            function (plantab) {
                                if (!curricula.includes(plantab.PdsDes)) {
                                    curricula.push(plantab.PdsDes);
                                }
                            }
                        )
                    }
                    this.curricula = curricula
                    this.items = response.data.results[0]
                    this.is_loading = false
                    this.scrollPage()
                })
        },
    },
})

var _{{ cds_cod }}_studyplans_others = new Vue({
    el: '#course_studyplans_others',
    data() {
        return {
            cds: {},
            url: '',
            is_loading: true,
            loader_source: '',
            item: {},
            items: {},
            curricula: [],
            loader_source_academicyears: '{{ academicyears_api }}?lang={{ LANGUAGE_CODE }}',
            academic_years_filter: [],
            is_loading_academicyears: true,
            selected_year: ''
        }
    },
    mounted() {
        this.callAcademicYears()
    },
    methods: {
        {% include "includes/unical_storage_cds_website_scroll.html" %}
        callStudyPlans(year={{ cds_website_current_year }}) {
            this.is_loading = true
            axios
                .get('{{ base_api }}{{ cds_websites_studyplans_api }}?lang={{ LANGUAGE_CODE }}&cds_cod={{ cds_cod }}&year=' + year)
                .then(response => {
                    let curricula = []
                    if(response.data.results.length > 0) {
                        response.data.results[0].PlanTabs.forEach(
                            function (plantab) {
                                if (!curricula.includes(plantab.PdsDes)) {
                                    curricula.push(plantab.PdsDes);
                                }
                            }
                        )
                    }
                    this.curricula = curricula
                    this.items = response.data.results[0]
                    this.is_loading = false
                    this.scrollPage()
                })
        },
        callAcademicYears() {
            axios
                .get(this.loader_source_academicyears)
                .then(response => {
                    this.academic_years_filter = response.data.results
                    // remove current year
                    {% if current_year == cds_website_current_year %}
                    this.academic_years_filter.shift()
                    {% endif %}
                    this.is_loading_academicyears = false
                })
        },
        callCdsByYear(year) {
            let cds_year_url = '{{ base_api }}{{ cds_api }}?lang={{ LANGUAGE_CODE }}&academicyear=' + year + '&cdscod={{ cds_identifier }}'
            axios
                .get(cds_year_url)
                .then(response => {
                    if(response.data.results.length>0 && 'RegDidId' in response.data.results[0])
                        _cds_data.CallURL(response.data.results[0]['RegDidId'])
                }
            )
        },
        changeYear(value) {
            this.selected_year = value
            let url = '{{ base_api }}{{ cds_websites_api }}{{ cds_identifier }}/?lang={{ LANGUAGE_CODE }}&academicyear=' + value
            axios
                .get(url)
                .then(response => {
                    this.callCdsByYear(value)
                    _{{ cds_cod }}_studyplans_others.callStudyPlans(value)
                }
            )
        },
    },
})
</script>
{% endblock container %}
