{% extends "pages/unical_cds_website.html" %}

{% load static %}
{% load i18n %}

{% load unicms_contexts %}
{% load unicms_storage_handler %}
{% load unicms_templates %}

{% include "includes/unical_storage_loading.html" %}

{% block extra_head %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'css/unicms_storage_forms.css' %}" type="text/css">
{% endblock extra_head %}

{% block website_page_year %}
{% storage_settings_value "CDS_WEBSITE_PROSPECT_CURRENT_YEAR" as cds_website_prospect_current_year %}
if(!year)year = "{{ cds_website_prospect_current_year }}"
{% endblock website_page_year %}

{% block page_title %}
Brochure - {{ block.super }}
{% endblock page_title %}

{% block messages %}
{% endblock messages %}

{% block container %}

{% get_current_language as LANGUAGE_CODE %}
{% breadcrumbs webpath=webpath leaf=handler %}

{% get_allowed_website request.get_host as host %}

{% settings_value "CMS_PATH_PREFIX" as cms_path_prefix %}
{% settings_value "CAROUSEL_HERO_AUTOPLAY_TIMEOUT" as carousel_timeout %}

{% storage_settings_value "CMS_STORAGE_BASE_PATH" as base_prefix %}
{% storage_settings_value "CMS_STORAGE_BASE_API" as base_api %}
{% storage_settings_value "CMS_STORAGE_CDS_API" as cds_api %}
{% storage_settings_value "CMS_STORAGE_TEACHER_VIEW_PREFIX_PATH" as teachers_prefix %}
{% storage_settings_value "CMS_STORAGE_ADDRESSBOOK_VIEW_PREFIX_PATH" as addressbook_prefix %}
{% storage_settings_value "CMS_STORAGE_CDS_WEBSITES_API" as cds_websites_api %}
{% storage_settings_value "CMS_STORAGE_CDS_WEBSITES_TOPICS_API" as topics_api %}
{% storage_settings_value "CMS_STORAGE_CDS_WEBSITES_PAGE_TOPICS" as page_topics %}
{% storage_settings_value "CMS_STORAGE_CDS_WEBSITES_TOPIC_ARTICLES_API" as page_topic_articles %}
{% storage_settings_value "CMS_STORAGE_CDS_WEBSITES_ISCRIVERSI_LABEL" as page_titlke %}
{% storage_settings_value "CMS_STORAGE_CDS_WEBSITE_PROSPECT_COLLAPSE_FIELDS" as collapse_fields %}
{% storage_settings_value "CMS_STORAGE_CDS_WEBSITE_PROSPECT_COLLAPSE_FIELDS_2" as collapse_fields_2 %}
{% storage_settings_value "CMS_STORAGE_CDS_WEBSITE_PROSPECT_DOCS" as course_docs %}
{% storage_settings_value "CMS_STORAGE_CDS_WEBSITES_REDIRECT_VIEW_PREFIX_PATH" as cds_website_redirect_path %}
{% storage_settings_value "MAIN_DOMAIN" as unicms_root_url %}

{% get_cds_website_root_path webpath cds_cod as cds_webpath %}

{% include "includes/unical_storage_loading.html" %}

<div id="_{{ cds_cod }}">

    <div class="col-12 pt-5 bd-content">
        {% block centered_container %}
        <div class="container pb-5">
            <div class="row">
                <div class="col">

                    {% if messages %}
                    <div class="mb-5">
                        {% for message in messages %}
                        <div class="mb-0 alert alert-{{ message.tags }}
                                   {% if 'error' in message.tags%} alert-danger{% endif %}
                                   {% if not forloop.first %}mt-1{% endif %}"
                                   role="alert">
                            {{ message|safe }}
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}

                    <div>
                        <div class="row mb-lg-3">
                            <div class="col-12 col-lg-8" v-if="_cds_data.cds.CdSVideo">
                                <div class="ratio ratio-16x9">
                                    <iframe :title="_cds_data.cds.CdSVideo"
                                            :src="youtubeNoCookie(_cds_data.cds.CdSVideo)"
                                            allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            <div class="col-12 col-lg mt-3 mt-lg-0" :class="{'ps-lg-4': _cds_data.cds.CdSVideo}">

                                <div class="accordion accordionUnicalRightIcon" id="accordionExampleLft">
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="heading1l">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1l" aria-expanded="false" aria-controls="collapse1l">
                                                <svg class="me-4 icon icon-white icon-xl badge-primary p-2" style="border-radius: 50%">
                                                    <use xlink:href="{% static 'svg/sprites.svg' %}#it-files"></use>
                                                </svg>
                                                <p class="h6 m-0" style="color: var(--dark_grey_unical)">
                                                    <b>{% trans "course in brief" %}</b>
                                                </p>
                                            </button>
                                        </h2>
                                        <div id="collapse1l" class="accordion-collapse collapse" data-bs-parent="#accordionExampleLft" role="region" aria-labelledby="heading1l">
                                            <div class="accordion-body">
                                                <span v-html="website.CDSIntro"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header " id="heading2l">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2l" aria-expanded="false" aria-controls="collapse2l">
                                                <svg class="me-4 icon icon-white icon-xl badge-primary p-2" style="border-radius: 50%">
                                                    <use xlink:href="{% static 'svg/sprites.svg' %}#it-copy"></use>
                                                </svg>
                                                <p class="h6 m-0" style="color: var(--dark_grey_unical)">
                                                    <b>{% trans "subjects" %}</b>
                                                </p>
                                            </button>
                                        </h2>
                                        <div id="collapse2l" class="accordion-collapse collapse" data-bs-parent="#accordionExampleLft" role="region" aria-labelledby="heading2l">
                                            <div class="accordion-body">
                                                <span v-html="website.CDSStudyPlan"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header " id="heading3l">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3l" aria-expanded="false" aria-controls="collapse3l">
                                                <svg class="me-4 icon icon-white icon-xl badge-primary p-2" style="border-radius: 50%">
                                                    <use xlink:href="{% static 'svg/sprites.svg' %}#it-pencil"></use>
                                                </svg>
                                                <p class="h6 m-0" style="color: var(--dark_grey_unical)">
                                                    <b>{% trans "how to enroll" %}</b>
                                                </p>
                                            </button>
                                        </h2>
                                        <div id="collapse3l" class="accordion-collapse collapse" data-bs-parent="#accordionExampleLft" role="region" aria-labelledby="heading3l">
                                            <div class="accordion-body">
                                                <span v-html="website.CDSEnrollmentMode"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header " id="heading4l">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4l" aria-expanded="false" aria-controls="collapse4l">
                                                <img src="{% static 'images/download.svg' %}" style="width: 64px" class="me-4" />
                                                <p class="h6 m-0" style="color: var(--dark_grey_unical)">
                                                    <b>{% trans "download materials" %}</b>
                                                </p>
                                            </button>
                                        </h2>
                                        <div id="collapse4l" class="accordion-collapse collapse" data-bs-parent="#accordionExampleLft" role="region" aria-labelledby="heading4l">
                                            <div class="accordion-body">
                                                {% if course_docs %}
                                                <ul>
                                                {% for doc, values in course_docs.items %}
                                                    <li>
                                                        <a href="{{ values.2 }}" target="_blank" title="{% if LANGUAGE_CODE == 'it' %}{{ values.1 }}{% else %}{{ values.0 }}{% endif %}">
                                                            <span>
                                                                {% if LANGUAGE_CODE == 'it' %}
                                                                    {{ values.1 }}
                                                                {% else %}
                                                                    {{ values.0 }}
                                                                {% endif %}
                                                            </span>
                                                        </a>
                                                    </li>
                                                {% endfor %}
                                                </ul>
                                                {% else %}
                                                    {% trans "No items here" %}
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item" style="background: var(--bordeaux_unical)">
                                        <h2 class="accordion-header" id="heading5l">
                                            <a href="#requestInfoForm" style="text-decoration: none !important" title="{% trans 'request info' %}">
                                                <button class="accordion-button no-icon" type="button" aria-expanded="false">
                                                    <svg class="me-4 icon icon-white icon-xl badge-primary p-2" style="border-radius: 50%">
                                                        <use xlink:href="{% static 'svg/sprites.svg' %}#it-info-circle"></use>
                                                    </svg>
                                                    <p style="text-transform: uppercase;" class="h6 m-0 text-white">
                                                        <b>{% trans "request info" %}</b>
                                                    </p>
                                                </button>
                                            </a>
                                        </h2>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 col-lg-8 d-flex">
                                <div class="card no-after mt-3" style="border:2px solid #b71918">
                                    <div class="card-body">
                                        <div class="row mb-3 mb-lg-3">
                                            <div class="col">
                                                <b>[[ _cds_data.cds.CourseClassName ]]</b>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12 col-lg-4">
                                                [[ website_labels['CDSSeatsNumber'] ]]
                                                <b class="h2 lighter ms-3 mb-0">[[ website.CDSSeatsNumber ]]</b>
                                            </div>
                                            <div class="col-12 col-lg-4">
                                                [[ website_labels['CDSLanguage'] ]]
                                                <b class="h2 lighter ms-3 mb-0">
                                                    <span v-for="(lang, index)  in website.CDSLanguage">
                                                        <span v-if="index > 0">, </span>
                                                        [[ lang ]]
                                                    </span>
                                                </b>
                                            </div>
                                            <div class="col-12 col-lg-4">
                                                [[ website_labels['CDSDuration'] ]]
                                                <b class="h2 lighter ms-3 mb-0">[[ website.CDSDuration ]] {% trans "years" %}</b>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-lg-4 d-flex ps-lg-4">
                                <div class="card no-after mt-3" style="border:2px solid #b71918">
                                    <div class="card-body d-flex">
                                        <div class="row m-auto">
                                            <div class="col m-auto">
                                                <ul class="list-inline text-start social m-auto">
                                                    <li class="list-inline-item">
                                                        <a href="https://it-it.facebook.com/unicalufficiale/" target="_blank" title="Facebook" rel="noopener noreferrer">
                                                            <svg class="icon icon-lg align-top">
                                                                <use xlink:href="{% static 'svg/sprites.svg' %}#it-facebook-square"></use>
                                                            </svg><span class="visually-hidden">Facebook</span>
                                                        </a>
                                                    </li>
                                                    <li class="list-inline-item">
                                                        <a href="https://twitter.com/UniCalPortale?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor" target="_blank" title="X" rel="noopener noreferrer">
                                                            <svg class="icon icon-lg align-top">
                                                                <use xlink:href="{% static 'svg/sprites.svg' %}#it-twitter"></use>
                                                            </svg><span class="visually-hidden">X</span>
                                                        </a>
                                                    </li>
                                                    <li class="list-inline-item">
                                                        <a href="https://www.linkedin.com/school/universit%C3%A0-della-calabria/" target="_blank" title="Linkedin" rel="noopener noreferrer">
                                                            <svg class="icon icon-lg align-top">
                                                                <use xlink:href="{% static 'svg/sprites.svg' %}#it-linkedin-square"></use>
                                                            </svg><span class="visually-hidden">Linkedin</span>
                                                        </a>
                                                    </li>
                                                    <li class="list-inline-item">
                                                        <a href="https://www.instagram.com/unical_official/" target="_blank" title="Instagram" rel="noopener noreferrer">
                                                            <svg class="icon icon-lg align-top">
                                                                <use xlink:href="{% static 'svg/sprites.svg' %}#it-instagram"></use>
                                                            </svg><span class="visually-hidden">Instagram</span>
                                                        </a>
                                                    </li>
                                                    <li class="list-inline-item">
                                                        <a href="http://www.youtube.com/@campusunical" target="_blank" title="YouTube" rel="noopener noreferrer">
                                                            <svg class="icon icon-lg align-top">
                                                                <use xlink:href="{% static 'svg/sprites.svg' %}#it-youtube"></use>
                                                            </svg><span class="visually-hidden">Youtube</span>
                                                        </a>
                                                    </li>
                                                    <li class="list-inline-item">
                                                        <a href="https://github.com/UniversitaDellaCalabria" target="_blank" title="Github" rel="noopener noreferrer">
                                                            <svg class="icon icon-lg align-top">
                                                                <use xlink:href="{% static 'svg/sprites.svg' %}#it-github"></use>
                                                            </svg><span class="visually-hidden">Github</span>
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endblock %}

        <div class="row mt-3 py-5" style="background: var(--light_grey)" v-if="website.CDSSliders && website.CDSSliders.length > 0">
            <div class="col">
                <div class="container">
                    <div class="row">
                        <div class="col-12 col-lg-8">
                            <div id="CdsSlider" class="owl-carousel owl-theme">
                                <div class="item" v-for="slide in website.CDSSliders">
                                    <p class="h1 lighter" style="color: var(--bordeaux_unical); font-family: Lora; font-style: italic;">
                                        [[ slide.SliderDescription ]]
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-4 text-center m-auto">
                            <svg class="m-auto icon icon-xl" id="slider_arrow" style="cursor: pointer">
                                <use xlink:href="{% static 'svg/sprites.svg' %}#it-arrow-right"></use>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container mt-3 py-5">
            <div class="row">
                <div class="col-12 col-lg">
                    <span v-html="website.CDSIntro"></span>

                    <div class="mt-5">
                        <div id="accordionDiv1-lft" class="accordion accordion-left-icon">
                            <div v-for="name in collapse_fields" v-if="website[name] && (website[name].length > 0 || Object.keys(website[name]).length > 0)">
                                <div class="accordion-item">
                                    <div class="accordion-header accordion-header-white" :id="'heading-' + name +'-lft'" style="background: var(--dark_grey_unical)">
                                        <button class="accordion-button"
                                                type="button"
                                                data-bs-toggle="collapse"
                                                :data-bs-target="'#collapse-' + name +'-lft'"
                                                aria-expanded="false"
                                                :aria-controls="'collapse-' + name +'-lft'">
                                            <span class="text-white" v-if="name == 'CDSAdmission'">
                                                {% trans "Who is eligible for the course" %}
                                            </span>
                                            <span class="text-white" v-else>
                                                [[ website_labels[name] ]]
                                            </span>
                                        </button>
                                    </div>
                                    <div :id="'collapse-' + name +'-lft'"
                                         class="accordion-collapse collapse"
                                         data-bs-parent="#accordionDiv1-lft"
                                         role="region"
                                         :aria-labelledby="'heading-' + name +'-lft'">
                                        <div class="accordion-body">
                                            <span v-if="Array.isArray(website[name])">
                                                <ul>
                                                    <li v-for="subvalue in website[name]">
                                                        <span v-if="_cds_data.containsHTML(subvalue)" v-html="subvalue"></span>
                                                        <span v-else>[[ subvalue ]]</span>
                                                    </li>
                                                </ul>
                                            </span>
                                            <span v-else-if="typeof website[name] === 'object'">
                                                <ul v-for="(valueProfile, nameProfile) in website[name]">
                                                    <li>
                                                        [[ nameProfile ]]
                                                        <ul v-for="(valueProfileInstance, nameProfileInstance) in valueProfile">
                                                            <li>
                                                                <span v-if="nameProfileInstance in website_labels"
                                                                      style="white-space: pre-line;">
                                                                    [[ _cds_data.cds_labels[nameProfileInstance] ]]
                                                                </span>
                                                                <span v-else>
                                                                    [[ nameProfileInstance ]]
                                                                </span> :
                                                                <span v-if="_cds_data.containsHTML(valueProfileInstance)" v-html="valueProfileInstance"></span>
                                                                <span v-else style="white-space: pre-line;">[[ valueProfileInstance ]]</span>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </span>
                                            <span v-else>
                                                <span>
                                                    <span v-if="_cds_data.containsHTML(website[name])" v-html="website[name]"></span>
                                                    <span v-else>[[ website[name] ]]</span>
                                                </span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <hr style="color: transparent">

                            <div v-for="name in collapse_fields_2" v-if="website[name] && (website[name].length > 0 || Object.keys(website[name]).length > 0)">
                                <div class="accordion-item">
                                    <div class="accordion-header" :id="'heading-' + name +'-lft'">
                                        <button class="accordion-button"
                                                type="button"
                                                data-bs-toggle="collapse"
                                                :data-bs-target="'#collapse-' + name +'-lft'"
                                                aria-expanded="false"
                                                :aria-controls="'collapse-' + name +'-lft'">
                                            <span v-if="name == 'CDSTaxes'">
                                                {% trans "Fees, contributions and excemptions" %}
                                            </span>
                                            <span v-else>
                                                [[ website_labels[name] ]]
                                            </span>
                                        </button>
                                    </div>
                                    <div :id="'collapse-' + name +'-lft'"
                                         class="accordion-collapse collapse"
                                         data-bs-parent="#accordionDiv1-lft"
                                         role="region"
                                         :aria-labelledby="'heading-' + name +'-lft'">
                                        <div class="accordion-body">
                                            <span v-if="Array.isArray(website[name])">
                                                <ul>
                                                    <li v-for="subvalue in website[name]">
                                                        <span v-if="_cds_data.containsHTML(subvalue)" v-html="subvalue"></span>
                                                        <span v-else>[[ subvalue ]]</span>
                                                    </li>
                                                </ul>
                                            </span>
                                            <span v-else-if="typeof website[name] === 'object'">
                                                <ul v-for="(valueProfile, nameProfile) in website[name]">
                                                    <li>
                                                        [[ nameProfile ]]
                                                        <ul v-for="(valueProfileInstance, nameProfileInstance) in valueProfile">
                                                            <li>
                                                                <span v-if="nameProfileInstance in website_labels"
                                                                      style="white-space: pre-line;">
                                                                    [[ _cds_data.cds_labels[nameProfileInstance] ]]
                                                                </span>
                                                                <span v-else>
                                                                    [[ nameProfileInstance ]]
                                                                </span> :
                                                                <span v-if="_cds_data.containsHTML(valueProfileInstance)" v-html="valueProfileInstance"></span>
                                                                <span v-else style="white-space: pre-line;">[[ valueProfileInstance ]]</span>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </span>
                                            <span v-else>
                                                <span v-if="_cds_data.containsHTML(website[name])" v-html="website[name]"></span>
                                                <span v-else>[[ website[name] ]]</span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-3 offset-lg-1 my-5 my-lg-0" v-if="(_cds_data.cds.OtherData && _cds_data.cds.OtherData.DirectorName && _cds_data.cds.OtherData.DirectorName.trim().length>0) || (_cds_data.cds.OtherData && _cds_data.cds.OtherData.DeputyDirectorName && _cds_data.cds.OtherData.DeputyDirectorName.trim().length>0)">
                    <div class="row" v-if="_cds_data.cds.OtherData && _cds_data.cds.OtherData.DirectorName && _cds_data.cds.OtherData.DirectorName.trim().length>0">
                        <div class="col-2">
                            <svg class="icon icon-muted">
                                <use xlink:href="{% static 'svg/sprites.svg' %}#it-user"></use>
                            </svg>
                        </div>
                        <div class="col-9 align-left">
                            <span>
                                <b>[[ _cds_data.cds_labels['DirectorName'] ]]</b>
                                <br>
                                <a :href="'//{{ host }}/{{ cms_path_prefix }}{{ base_prefix }}/{{ teachers_prefix }}/' + _cds_data.cds.OtherData.DirectorId +'/'" v-if="_cds_data.cds.OtherData.DirectorId">
                                    [[ _cds_data.cds.OtherData.DirectorName ]]
                                </a>
                                <span v-else>
                                    [[ _cds_data.cds.OtherData.DirectorName ]]
                                </span>

                                <div class="row" v-if="_cds_data.coordinator_data && _cds_data.coordinator_data.hasOwnProperty('OfficeReference')">
                                    <div class="col-2">
                                        <svg class="icon icon-sm icon-muted me-2">
                                            <use xlink:href="{% static 'svg/sprites.svg' %}#it-map-marker"></use>
                                        </svg>
                                    </div>
                                    <div class="col-10">
                                        [[ _cds_data.coordinator_data.OfficeReference[0] ]]
                                    </div>
                                </div>
                                <div class="row" v-if="_cds_data.coordinator_data && _cds_data.coordinator_data.hasOwnProperty('Email')">
                                    <div class="col-2">
                                        <svg class="icon icon-sm icon-muted me-2">
                                            <use xlink:href="{% static 'svg/sprites.svg' %}#it-mail"></use>
                                        </svg>
                                    </div>
                                    <div class="col-10">
                                        <a :href="'email:'+_cds_data.coordinator_data.Email[0]">
                                            [[ _cds_data.coordinator_data.Email[0] ]]
                                        </a>
                                    </div>
                                </div>
                                <div class="row" v-if="_cds_data.coordinator_data && _cds_data.coordinator_data.hasOwnProperty('TelOffice')">
                                    <div class="col-2">
                                        <svg class="icon icon-sm icon-muted me-2">
                                            <use xlink:href="{% static 'svg/sprites.svg' %}#it-telephone"></use>
                                        </svg>
                                    </div>
                                    <div class="col-10">
                                        [[ _cds_data.coordinator_data.TelOffice[0] ]]
                                    </div>
                                </div>
                            </span>
                        </div>

                        <div v-if="_cds_data.cds.OtherData && _cds_data.cds.OtherData.DeputyDirectorName && _cds_data.cds.OtherData.DeputyDirectorName.trim().length>0" class="row">
                            <div class="col-12"><hr></div>
                            <div class="col-2">
                                <svg class="icon icon-muted">
                                    <use xlink:href="{% static 'svg/sprites.svg' %}#it-user"></use>
                                </svg>
                            </div>
                            <div class="col-9 align-left">
                                <span>
                                    <b>[[ _cds_data.cds_labels['DeputyDirectorName'] ]]</b>
                                    <br>
                                    <a :href="'//{{ host }}/{{ cms_path_prefix }}{{ base_prefix }}/{{ teachers_prefix }}/' + _cds_data.cds.OtherData.DeputyDirectorId +'/'" v-if="_cds_data.cds.OtherData.DeputyDirectorId">
                                        [[ _cds_data.cds.OtherData.DeputyDirectorName ]]
                                    </a>
                                    <span v-else>
                                        [[ _cds_data.cds.OtherData.DeputyDirectorName ]]
                                    </span>

                                    <div class="row" v-if="_cds_data.deputy_coordinator_data && _cds_data.deputy_coordinator_data.hasOwnProperty('OfficeReference.length')">
                                        <div class="col-2">
                                            <svg class="icon icon-sm icon-muted me-2">
                                                <use xlink:href="{% static 'svg/sprites.svg' %}#it-map-marker"></use>
                                            </svg>
                                        </div>
                                        <div class="col-10">
                                            [[ _cds_data.deputy_coordinator_data.OfficeReference[0] ]]
                                        </div>
                                    </div>
                                    <div class="row" v-if="_cds_data.deputy_coordinator_data && _cds_data.deputy_coordinator_data.hasOwnProperty('Email')">
                                        <div class="col-2">
                                            <svg class="icon icon-sm icon-muted me-2">
                                                <use xlink:href="{% static 'svg/sprites.svg' %}#it-mail"></use>
                                            </svg>
                                        </div>
                                        <div class="col-10">
                                            <a :href="'email:'+_cds_data.deputy_coordinator_data.Email[0]">
                                                [[ _cds_data.deputy_coordinator_data.Email[0] ]]
                                            </a>
                                        </div>
                                    </div>
                                    <div class="row" v-if="_cds_data.deputy_coordinator_data && _cds_data.deputy_coordinator_data.hasOwnProperty('TelOffice')">
                                        <div class="col-2">
                                            <svg class="icon icon-sm icon-muted me-2">
                                                <use xlink:href="{% static 'svg/sprites.svg' %}#it-telephone"></use>
                                            </svg>
                                        </div>
                                        <div class="col-10">
                                            [[ _cds_data.deputy_coordinator_data.TelOffice[0] ]]
                                        </div>
                                    </div>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-5" v-if="_cds_data.cds.OfficesData && _cds_data.fixed_cds.OfficesData.length > 0">
                <div class="col">
                    <loading-icon v-if="_cds_data.is_loading"></loading-icon>
                    <div class="card-wrapper card-space" v-else>
                        <div class="card card-bg no-after">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-12 col-lg-4" v-for="(office, index) in _cds_data.cds.OfficesData" :class="[index>0 ? 'mt-4 mt-lg-0': '', index >2 ? 'mt-lg-4' : '']">
                                        <span>
                                            <b>[[ office.OfficeName ]]</b>
                                            <div class="mt-2">
                                                <div class="row">
                                                    <div class="col-12">
                                                        <a :href="'//{{ host }}/{{ cms_path_prefix }}{{ base_prefix }}/{{ addressbook_prefix }}/' + office.OfficeDirector +'/'" v-if="office.OfficeDirector && office.OfficeDirectorName">
                                                            [[ office.OfficeDirectorName ]]
                                                        </a>
                                                        <span v-else-if="office.OfficeDirectorName">
                                                            [[ office.OfficeDirectorName ]]
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="row" v-if="office.TelOffice && office.TelOffice.trim().length>0">
                                                    <div class="col-1">
                                                        <svg class="icon icon-sm icon-muted me-2">
                                                            <use xlink:href="{% static 'svg/sprites.svg' %}#it-telephone"></use>
                                                        </svg>
                                                    </div>
                                                    <div class="col-11">
                                                        [[ office.TelOffice ]]
                                                    </div>
                                                </div>
                                                <div class="row" v-if="office.Email && office.Email.trim().length>0">
                                                    <div class="col-1">
                                                        <svg class="icon icon-sm icon-muted me-2">
                                                            <use xlink:href="{% static 'svg/sprites.svg' %}#it-mail"></use>
                                                        </svg>
                                                    </div>
                                                    <div class="col-11">
                                                        <a :href="'email:'+office.Email">
                                                            [[ office.Email ]]
                                                        </a>
                                                    </div>
                                                </div>
                                                <div class="row" v-if="(office.Building && office.Building.trim().length>0) || (office.Floor && office.Floor.trim().length>0)">
                                                    <div class="col-1">
                                                        <svg class="icon icon-sm icon-muted me-2">
                                                            <use xlink:href="{% static 'svg/sprites.svg' %}#it-map-marker"></use>
                                                        </svg>
                                                    </div>
                                                    <div class="col-11">
                                                        <div v-if="office.Building && office.Building.trim().length>0">
                                                            [[ _cds_data.fixed_cds_labels['Building'] ]] [[ office.Building ]]
                                                        </div>
                                                        <div v-if="office.Floor && office.Floor.trim().length>0">
                                                            [[ _cds_data.fixed_cds_labels['Floor'] ]] [[ office.Floor ]]
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" v-if="office.Timetables && office.Timetables.trim().length>0">
                                                    <div class="col-1">
                                                        <svg class="icon icon-sm icon-muted me-2">
                                                            <use xlink:href="{% static 'svg/sprites.svg' %}#it-clock"></use>
                                                        </svg>
                                                    </div>
                                                    <div class="col-11">
                                                        <span v-html="office.Timetables"></span>
                                                    </div>
                                                </div>
                                                <div class="row" v-if="office.OnlineCounter && office.OnlineCounter.trim().length>0">
                                                    <div class="col-1">
                                                        <svg class="icon icon-sm icon-muted me-2">
                                                            <use xlink:href="{% static 'svg/sprites.svg' %}#it-link"></use>
                                                        </svg>
                                                    </div>
                                                    <div class="col-11">
                                                        <a :href="office.OnlineCounter" target="_blank" rel="noreferrer noopener">
                                                            [[ _cds_data.fixed_cds_labels['OnlineCounter'] ]]
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="row mt-3 py-5" style="background: var(--light_grey)" v-if="website.CDSExStudents && website.CDSExStudents.length > 0">
            <div class="col">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <p class="h3 mb-3">
                                {% trans "Discover the career of former students" %}
                            </p>
                        </div>
                    </div>
                    <div class="row mt-4">
                        <div class="col-12">
                            <div id="CdsExStudents" class="owl-carousel owl-theme">
                                <div class="item text-center" v-for="slide in website.CDSExStudents">
                                    <img v-if="slide.StudentPhoto" :src="slide.StudentPhoto" class="w-50 m-auto" style="height: fit-content; border:2px solid #b71918; border-radius: 50%; aspect-ratio: 1/1;" />
                                    <img v-else src="{% static 'images/user.avif' %}" class="w-50 m-auto" style="height: fit-content; border:2px solid #b71918; border-radius: 50%" />
                                    <p class="h3 lighter mt-2" style="color: var(--bordeaux_unical); font-family: Lora; font-style: italic;">
                                        [[ slide.StudentName ]]
                                    </p>
                                    <p>
                                        [[ slide.StudentProfile ]]
                                    </p>
                                    <p>
                                        <a :href="slide.StudentLink" target="_blank" rel="noreferrer noopener">
                                            {% trans "Click here" %}
                                        </a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="row" :class="!website.CDSExStudents || website.CDSExStudents.length == 0? 'pb-5' : 'mt-3 py-5'">
            <div class="col">
                <div class="container">
                    <ul class="nav nav-tabs nav-tabs-icon-text" id="tabList" role="tablist">
                        <li class="nav-item h3">
                            <a class="nav-link active" id="studentLife-tab" data-bs-toggle="tab" href="#studentLifeTab" role="tab" aria-controls="studentLifeTab" aria-selected="true">
                                {% trans "Life on Campus" %}
                            </a>
                        </li>
                        <li class="nav-item h3">
                            <a class="nav-link" id="studentServices-tab" data-bs-toggle="tab" href="#studentServicesTab" role="tab" aria-controls="studentServicesTab">
                                {% trans "Services to students" %}
                            </a>
                        </li>
                        <li class="nav-item h3">
                            <a class="nav-link" id="residentialCenter-tab" data-bs-toggle="tab" href="#residentialCenterTab" role="tab" aria-controls="residentialCenterTab">
                                {% trans "Residential center" %}
                            </a>
                        </li>
                    </ul>


                    <div class="tab-content" id="tabContent">

                        <div class="tab-pane p-4 pb-0 fade show active" id="studentLifeTab" role="tabpanel" aria-labelledby="studentLifeTab-tab">
                            <div class="row">
                                <div class="col-12 col-lg-3">
                                    <img src="{% static 'images/cds_websites/tab_1.jpg' %}" class="w-100 mb-4 mb-lg-0" style="border: 5px solid var(--bordeaux_unical)"/>
                                </div>
                                <div class="col-12 col-lg-9 ps-lg-3">
                                    {% trans "On the largest and most equipped campus in Italy, you can experience a unique university community, sharing educational, recreational, sporting and cultural moments with colleagues and teachers. The Campus is equipped with study rooms, a sports centre, theatres, amphitheatres, cinemas, bars, refreshment points and other meeting spaces. A citadel that allows you to live an extraordinary human experience, as well as an educational one." %}
                                    <p class="mt-4">
                                    <a href="/in-sintesi/campus/#vita_nel_campus" target="_blank" class="btn btn-secondary">
                                        <svg class="icon icon-sm icon-muted me-2 icon-white">
                                            <use xlink:href="{% static 'svg/sprites.svg' %}#it-arrow-right-circle"></use>
                                        </svg> {% trans "Discover more" %}
                                    </a>
                                </p>
                                </div>
                            </div>
                        </div>

                        <div class="tab-pane p-4 pb-0 fade" id="studentServicesTab" role="tabpanel" aria-labelledby="studentServicesTab-tab">
                            <div class="row">
                                <div class="col-12 col-lg-3">
                                    <img src="{% static 'images/cds_websites/tab_2.jpg' %}" class="w-100 mb-4 mb-lg-0" style="border: 5px solid var(--bordeaux_unical)"/>
                                </div>
                                <div class="col-12 col-lg-9 ps-lg-3">
                                    {% trans "A citadel that hosts those who live on the Campus in the best possible way, because it offers multiple services for study and for individual and collective well-being: libraries, a language learning centre, counseling and inclusion services. On the Campus there is also a health center, a post office, a bank branch and a space for silence." %}
                                    <p class="mt-4">
                                        <a href="/in-sintesi/campus/#servizi_studenti" class="btn btn-secondary">
                                            <svg class="icon icon-sm icon-muted me-2 icon-white">
                                                <use xlink:href="{% static 'svg/sprites.svg' %}#it-arrow-right-circle"></use>
                                            </svg> {% trans "Discover more" %}
                                        </a>
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="tab-pane p-4 pb-0 fade" id="residentialCenterTab" role="tabpanel" aria-labelledby="residentialCenterTab-tab">
                            <div class="row">
                                <div class="col-12 col-lg-3">
                                    <img src="{% static 'images/cds_websites/tab_3.jpg' %}" class="w-100 mb-4 mb-lg-0" style="border: 5px solid var(--bordeaux_unical)"/>
                                </div>
                                <div class="col-12 col-lg-9 ps-lg-3">
                                    {% trans "It completes and enhances the offer of the University of Calabria and realizes the idea of an Anglo-Saxon university campus. It is distributed in 10 districts in which the university residences are located, consisting of apartments with double and single bedrooms, living room, kitchen and bathroom. In the neighborhoods there are common spaces for studying and for recreational and sporting activities, with the presence of TV rooms, games rooms and gyms; laundry and bike rental services are available." %}
                                    <p class="mt-4">
                                        <a href="/in-sintesi/campus/#centro_residenziale" class="btn btn-secondary">
                                            <svg class="icon icon-sm icon-muted me-2 icon-white">
                                                <use xlink:href="{% static 'svg/sprites.svg' %}#it-arrow-right-circle"></use>
                                            </svg> {% trans "Discover more" %}
                                        </a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-3 py-5" style="background: var(--light_grey)" id="requestInfoForm">
            <div class="col">
                <div class="container mb-3">
                    <p class="h3 mb-4">
                        <svg class="icon icon-xl me-3" style="fill: var(--bordeaux_unical)">
                            <use xlink:href="{% static 'svg/sprites.svg' %}#it-info-circle"></use>
                        </svg> {% trans "Request information for this course" %}
                    </p>

                    <form method="post" action="" class="light-form">
                        <div class="row">
                            {% for field in form %}
                                {% if field.field.widget.input_type != 'hidden' %}
                                    {% if not forloop.counter0 or field.name == 'message'%}
                                    <div class="col-12 col-lg-6">
                                    {% elif field.name == 'privacy'%}
                                    <div class="col-12 py-3">
                                    {% endif %}
                                        <div style="padding: 0 0 1rem">
                                            <b>{{ field.label_tag }}</b>
                                            {% if field.field.required %}*{% endif %}
                                {% endif %}
                                {{ field }}
                                {% if field.field.widget.input_type != 'hidden' %}
                                        {% if field.help_text %}
                                            <span class="form-text text-muted">
                                                {{ field.help_text|safe }}
                                            </span>
                                        {% endif %}
                                            <span class="text-danger">
                                                {{ field.errors }}
                                            </span>
                                        </div>
                                    {% if field.name == 'phone' or field.name == 'message' %}
                                    </div>
                                    {% endif %}
                                {% endif %}
                            {% endfor %}
                        </div>

                        <input type="hidden" name="cds_cod" value="{{ cds_cod }}">
                        <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf }}">

                        <div class="d-grid gap-2">
                            <button class="btn btn-success"
                                    type="button"
                                    data-bs-toggle="modal"
                                    data-bs-target="#modal_submit">
                                {% trans "Submit" %}
                            </button>
                        </div>
                        <div class="modal fade" tabindex="-1" role="dialog" id="modal_submit">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">
                                            {% trans "Confirm" %}
                                        </h5>
                                        <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="{% trans 'Close' %}">
                                           <svg class="icon">
                                              <use xlink:href="{% static 'svg/sprites.svg' %}#it-close"></use>
                                           </svg>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <p>
                                            {% trans "Do you want to confirm the entered data?" %}
                                        </p>
                                    </div>
                                    <div class="modal-footer">
                                        <input class="btn btn-success"
                                               type="submit"
                                               id="submitForm"
                                               value="{% trans 'Yes, proceed' %}">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>

                </div>
            </div>
        </div>

        {% if cds_webpath %}
        <div class="row mt-3 pt-5">
            <div class="col">
                <div class="container">
                    <p class="h3 text-center">
                        {% trans "If you want more information on the Degree Course" %}
                    </p>
                    <p class="text-center my-4">
                        {% trans "For details on the contents of individual courses, training periods abroad, teachers, tutors, study rooms, laboratories, research centres, other structures and socialization initiatives, visit the Study Program website." %}
                    </p>
                    <p class="text-center">
                        <a href="{{ cds_webpath.fullpath }}" class="btn btn-secondary">
                            {% trans "Go to the institutional site" %}
                        </a>
                    </p>
                </div>
            </div>
        </div>
        {% else %}
        {% get_cds_website_morph cds_cod as old_cds_list %}
        {% for old_cds_cod in old_cds_list %}
            {% get_cds_website_root_path cds_cod=old_cds_cod as old_webpath %}
            {% if old_webpath %}
            <div class="row mt-3 pt-5">
                <div class="col">
                    <div class="container">
                        <p class="h3 text-center">
                            {% trans "If you want more information on the Degree Course" %}
                        </p>
                        <p class="text-center my-4">
                            {% trans "For details on the contents of individual courses, training periods abroad, teachers, tutors, study rooms, laboratories, research centres, other structures and socialization initiatives, visit the Study Program website." %}
                        </p>
                        <p class="text-center">
                            <a href="{{ old_webpath.fullpath }}" class="btn btn-secondary">
                                {% trans "Go to the institutional site" %}
                            </a>
                        </p>
                    </div>
                </div>
            </div>
            {% endif %}
        {% endfor %}
        {% endif %}

    </div>
</div>

<script>
    var _{{ cds_cod }} = new Vue({
        el: '#_{{ cds_cod }}',
        data() {
            return {
                website: {},
                website_labels: {},
                collapse_fields: {{ collapse_fields|safe }},
                collapse_fields_2: {{ collapse_fields_2|safe }},
                regdidid: null
            }
        },
        mounted() {
            this.callWebsite()
        },
        updated() {
            this.setSlider(div_id='#CdsSlider', items=1, single=true)
            this.setSlider(div_id='#CdsExStudents', items=3, timeout=({{ carousel_timeout|default:5000 }} + 2000))
        },
        methods: {
            callWebsite() {
                let url = '{{ base_api }}{{ cds_websites_api }}{{ cds_cod }}/?lang={{ LANGUAGE_CODE }}'
                axios
                    .get(url)
                    .then(response => {
                        this.website = response.data.results
                        this.website_labels = response.data.labels
                    }
                )
            },
            setSlider(div_id, items=1, single=false, timeout={{ carousel_timeout|default:5000 }}) {
                let tablet_items = 2;
                if(single) tablet_items = 1;
                $(div_id).owlCarousel({
                    nav : true, // Show next and prev buttons
                    //rewind: true,
                    loop: false,
                    //slideSpeed : 300,
                    //paginationSpeed : 400,
                    autoplay: true,
                    autoplayTimeout: timeout,
                    dots: false,
                    margin: 12,
                    //dotsEach: false,
                    stagePadding: 0,

                    responsive : {
                        // breakpoint from 0 up
                        0 : {
                            items: 1
                        },
                        // breakpoint from 481 up
                        481 : {
                            items: tablet_items
                        },
                        // breakpoint from 1024 up
                        1024 : {
                            items: items
                        }
                    }
                  //lazyLoad : true,
                });
                $("#slider_arrow").click(function(){
                    $(div_id).trigger('next.owl.carousel');
                });
            },
            youtubeNoCookie(value) {
                return value.replace("youtube.com", "youtube-nocookie.com")
            }
        },
    })
</script>
{% endblock container %}
